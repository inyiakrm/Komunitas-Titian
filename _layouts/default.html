<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% if page.title %}{{ page.title }}{% else %}Catatan Pembacaan{% endif %}</title>
  <link rel="stylesheet" href="{{ '/assets/css/styles.css' | relative_url }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <header>
    <h1>OTA LAPAU KOMUNITAS TITIAN</h1>
    {% if page.subtitle %}
    <p class="subtitle">{{ page.subtitle }}</p>
    {% endif %}
  </header>

  {{ content }}

  <footer>
    <p>Â© <span id="current-year">2023</span> Nama Anda - Catatan Pembacaan</p>
    <script>document.getElementById('current-year').textContent = new Date().getFullYear();</script>
  </footer>

  <script>
  document.addEventListener('DOMContentLoaded', function() {
    // Tambahkan ID ke semua h2 dan h3 yang belum memiliki ID
    var headings = document.querySelectorAll('.main-content h2, .main-content h3');
    headings.forEach(function(heading) {
      if (!heading.id) {
        heading.id = heading.textContent.trim().toLowerCase().replace(/[^\w\s-]/g, '').replace(/[\s_-]+/g, '-');
      }
    });

    // Aktifkan link daftar isi
    var tocLinks = document.querySelectorAll('#table-of-contents a');
    tocLinks.forEach(function(link) {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        var targetId = this.getAttribute('href').substring(1);
        var targetElement = document.getElementById(targetId);
        if (targetElement) {
          window.scrollTo({
            top: targetElement.offsetTop - 20,
            behavior: 'smooth'
          });

          // Tambahkan class active ke link yang diklik
          tocLinks.forEach(function(l) { l.classList.remove('active'); });
          this.classList.add('active');
        }
      });
    });
  });
  </script>
</body>
</html>